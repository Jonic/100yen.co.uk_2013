var Particle, addParticle, animationLoop, backingStoreRatio, canvas, context, destroyParticlesOutsideCanvasBounds, devicePixelRatio, maxVelocity, oldHeight, oldWidth, particlesArray, particlesIds, particlesOrigin, random, randomColor, randomInteger, ratio, updateParticlesOrigin;

canvas = document.getElementById('dots');

context = canvas.getContext('2d');

maxVelocity = 10;

particlesArray = [];

particlesIds = [];

particlesOrigin = {
  x: 0,
  y: 0
};

Particle = (function() {
  function Particle() {
    this.id = Math.random().toString(36).substr(2, 5);
    this.alpha = random(0.75, 1);
    this.rgb = randomColor();
    this.diameter = Math.round(random(50));
    this.radius = Math.round(this.diameter / 2);
    this.position = {
      x: particlesOrigin.x - this.radius,
      y: particlesOrigin.y - this.radius
    };
    this.velocity = {
      x: random(0, maxVelocity) - (maxVelocity / 2),
      y: random(0, maxVelocity) - (maxVelocity / 2)
    };
    return this;
  }

  Particle.prototype.updateValues = function() {
    this.position.x += this.velocity.x;
    return this.position.y += this.velocity.y;
  };

  Particle.prototype.draw = function() {
    context.fillStyle = 'rgba(' + this.rgb + ', ' + this.alpha + ')';
    context.beginPath();
    context.arc(this.position.x, this.position.y, this.radius, 0, 2 * Math.PI, true);
    context.closePath();
    return context.fill();
  };

  Particle.prototype.withinCanvasBounds = function() {
    var result;
    result = true;
    if (this.position.x < -this.diameter) {
      result = false;
    } else if (this.position.x > canvas.width + this.diameter) {
      result = false;
    }
    if (this.position.y < -this.diameter) {
      result = false;
    } else if (this.position.y > canvas.height + this.diameter) {
      result = false;
    }
    return result;
  };

  return Particle;

})();

addParticle = function() {
  var particle;
  particle = new Particle();
  particlesArray.unshift(particle);
  particlesIds.unshift(particle.id);
};

animationLoop = function() {
  var particle, particlesToDelete, _i, _len;
  window.requestAnimationFrame(animationLoop);
  particlesToDelete = [];
  context.clearRect(0, 0, canvas.width, canvas.height);
  for (_i = 0, _len = particlesArray.length; _i < _len; _i++) {
    particle = particlesArray[_i];
    if (particle.withinCanvasBounds()) {
      particle.updateValues();
      particle.draw();
    } else {
      particlesToDelete.push(particle.id);
    }
  }
  destroyParticlesOutsideCanvasBounds(particlesToDelete);
};

destroyParticlesOutsideCanvasBounds = function(particlesToDelete) {
  var id, index, particle, _i, _len;
  for (_i = 0, _len = particlesToDelete.length; _i < _len; _i++) {
    id = particlesToDelete[_i];
    index = particlesIds.indexOf(id);
    particle = particlesArray[index];
    if (particle != null) {
      particlesArray.splice(index, 1);
      particlesIds.splice(index, 1);
    }
  }
};

random = function(min, max) {
  if (min == null) {
    min = 0;
    max = 1;
  } else if (max == null) {
    max = min;
    min = 0;
  }
  return (Math.random() * (max - min)) + min;
};

randomColor = function() {
  var b, g, r;
  r = randomInteger(0, 200);
  g = randomInteger(0, 200);
  b = randomInteger(0, 200);
  return r + ", " + g + ", " + b;
};

randomInteger = function(min, max) {
  if (max == null) {
    max = min;
    min = 0;
  }
  return Math.floor(Math.random() * (max + 1 - min)) + min;
};

updateParticlesOrigin = function(event) {
  event.preventDefault();
  particlesOrigin.x = event.pageX;
  particlesOrigin.y = event.pageY;
  addParticle();
};

canvas.width = document.body.clientWidth;

canvas.height = document.body.clientHeight;

devicePixelRatio = window.devicePixelRatio || 1;

backingStoreRatio = context.webkitBackingStorePixelRatio || context.backingStorePixelRatio || 1;

ratio = devicePixelRatio / backingStoreRatio;

if (devicePixelRatio !== backingStoreRatio) {
  oldWidth = canvas.width;
  oldHeight = canvas.height;
  canvas.width = oldWidth * ratio;
  canvas.height = oldHeight * ratio;
  canvas.style.width = oldWidth + 'px';
  canvas.style.height = oldHeight + 'px';
  context.scale(ratio, ratio);
}

document.addEventListener('mousemove', updateParticlesOrigin);

document.addEventListener('touchmove', updateParticlesOrigin);

animationLoop();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hc3Rlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxrUkFBQTs7QUFBQSxNQUFBLEdBQWtCLFFBQVEsQ0FBQyxjQUFULENBQXlCLE1BQXpCLENBQWxCLENBQUE7O0FBQUEsT0FDQSxHQUFrQixNQUFNLENBQUMsVUFBUCxDQUFtQixJQUFuQixDQURsQixDQUFBOztBQUFBLFdBRUEsR0FBa0IsRUFGbEIsQ0FBQTs7QUFBQSxjQUdBLEdBQWtCLEVBSGxCLENBQUE7O0FBQUEsWUFJQSxHQUFrQixFQUpsQixDQUFBOztBQUFBLGVBS0EsR0FBa0I7QUFBQSxFQUNqQixDQUFBLEVBQUcsQ0FEYztBQUFBLEVBRWpCLENBQUEsRUFBRyxDQUZjO0NBTGxCLENBQUE7O0FBQUE7QUFZYyxFQUFBLGtCQUFBLEdBQUE7QUFDWixJQUFBLElBQUMsQ0FBQSxFQUFELEdBQVksSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFhLENBQUMsUUFBZCxDQUF1QixFQUF2QixDQUEwQixDQUFDLE1BQTNCLENBQWtDLENBQWxDLEVBQXFDLENBQXJDLENBQVosQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLEtBQUQsR0FBWSxNQUFBLENBQU8sSUFBUCxFQUFhLENBQWIsQ0FEWixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsR0FBRCxHQUFZLFdBQUEsQ0FBQSxDQUZaLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFBLENBQU8sRUFBUCxDQUFYLENBSFosQ0FBQTtBQUFBLElBSUEsSUFBQyxDQUFBLE1BQUQsR0FBWSxJQUFJLENBQUMsS0FBTCxDQUFXLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBdkIsQ0FKWixDQUFBO0FBQUEsSUFNQSxJQUFDLENBQUEsUUFBRCxHQUFZO0FBQUEsTUFDWCxDQUFBLEVBQUcsZUFBZSxDQUFDLENBQWhCLEdBQW9CLElBQUMsQ0FBQSxNQURiO0FBQUEsTUFFWCxDQUFBLEVBQUcsZUFBZSxDQUFDLENBQWhCLEdBQW9CLElBQUMsQ0FBQSxNQUZiO0tBTlosQ0FBQTtBQUFBLElBV0EsSUFBQyxDQUFBLFFBQUQsR0FBWTtBQUFBLE1BQ1gsQ0FBQSxFQUFHLE1BQUEsQ0FBTyxDQUFQLEVBQVUsV0FBVixDQUFBLEdBQXlCLENBQUMsV0FBQSxHQUFjLENBQWYsQ0FEakI7QUFBQSxNQUVYLENBQUEsRUFBRyxNQUFBLENBQU8sQ0FBUCxFQUFVLFdBQVYsQ0FBQSxHQUF5QixDQUFDLFdBQUEsR0FBYyxDQUFmLENBRmpCO0tBWFosQ0FBQTtBQWdCQSxXQUFPLElBQVAsQ0FqQlk7RUFBQSxDQUFiOztBQUFBLHFCQW1CQSxZQUFBLEdBQWMsU0FBQSxHQUFBO0FBQ2IsSUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsSUFBZSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQXpCLENBQUE7V0FDQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsSUFBZSxJQUFDLENBQUEsUUFBUSxDQUFDLEVBRlo7RUFBQSxDQW5CZCxDQUFBOztBQUFBLHFCQXVCQSxJQUFBLEdBQU0sU0FBQSxHQUFBO0FBQ0wsSUFBQSxPQUFPLENBQUMsU0FBUixHQUFxQixPQUFBLEdBQVMsSUFBQyxDQUFBLEdBQVYsR0FBaUIsSUFBakIsR0FBdUIsSUFBQyxDQUFBLEtBQXhCLEdBQWlDLEdBQXRELENBQUE7QUFBQSxJQUNBLE9BQU8sQ0FBQyxTQUFSLENBQUEsQ0FEQSxDQUFBO0FBQUEsSUFFQSxPQUFPLENBQUMsR0FBUixDQUFZLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBdEIsRUFBeUIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFuQyxFQUFzQyxJQUFDLENBQUEsTUFBdkMsRUFBK0MsQ0FBL0MsRUFBa0QsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUEzRCxFQUErRCxJQUEvRCxDQUZBLENBQUE7QUFBQSxJQUdBLE9BQU8sQ0FBQyxTQUFSLENBQUEsQ0FIQSxDQUFBO1dBSUEsT0FBTyxDQUFDLElBQVIsQ0FBQSxFQUxLO0VBQUEsQ0F2Qk4sQ0FBQTs7QUFBQSxxQkE4QkEsa0JBQUEsR0FBb0IsU0FBQSxHQUFBO0FBQ25CLFFBQUEsTUFBQTtBQUFBLElBQUEsTUFBQSxHQUFTLElBQVQsQ0FBQTtBQUVBLElBQUEsSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxDQUFBLElBQUUsQ0FBQSxRQUFuQjtBQUNDLE1BQUEsTUFBQSxHQUFTLEtBQVQsQ0FERDtLQUFBLE1BRUssSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxNQUFNLENBQUMsS0FBUCxHQUFlLElBQUMsQ0FBQSxRQUFqQztBQUNKLE1BQUEsTUFBQSxHQUFTLEtBQVQsQ0FESTtLQUpMO0FBT0EsSUFBQSxJQUFHLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLENBQUEsSUFBRSxDQUFBLFFBQW5CO0FBQ0MsTUFBQSxNQUFBLEdBQVMsS0FBVCxDQUREO0tBQUEsTUFFSyxJQUFHLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLElBQUMsQ0FBQSxRQUFsQztBQUNKLE1BQUEsTUFBQSxHQUFTLEtBQVQsQ0FESTtLQVRMO0FBWUEsV0FBTyxNQUFQLENBYm1CO0VBQUEsQ0E5QnBCLENBQUE7O2tCQUFBOztJQVpELENBQUE7O0FBQUEsV0F5REEsR0FBYyxTQUFBLEdBQUE7QUFDYixNQUFBLFFBQUE7QUFBQSxFQUFBLFFBQUEsR0FBZSxJQUFBLFFBQUEsQ0FBQSxDQUFmLENBQUE7QUFBQSxFQUVBLGNBQWMsQ0FBQyxPQUFmLENBQXVCLFFBQXZCLENBRkEsQ0FBQTtBQUFBLEVBR0EsWUFBWSxDQUFDLE9BQWIsQ0FBcUIsUUFBUSxDQUFDLEVBQTlCLENBSEEsQ0FEYTtBQUFBLENBekRkLENBQUE7O0FBQUEsYUFpRUEsR0FBZ0IsU0FBQSxHQUFBO0FBQ2YsTUFBQSxxQ0FBQTtBQUFBLEVBQUEsTUFBTSxDQUFDLHFCQUFQLENBQTZCLGFBQTdCLENBQUEsQ0FBQTtBQUFBLEVBRUEsaUJBQUEsR0FBb0IsRUFGcEIsQ0FBQTtBQUFBLEVBSUEsT0FBTyxDQUFDLFNBQVIsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsTUFBTSxDQUFDLEtBQS9CLEVBQXNDLE1BQU0sQ0FBQyxNQUE3QyxDQUpBLENBQUE7QUFNQSxPQUFBLHFEQUFBO2tDQUFBO0FBQ0MsSUFBQSxJQUFHLFFBQVEsQ0FBQyxrQkFBVCxDQUFBLENBQUg7QUFDQyxNQUFBLFFBQVEsQ0FBQyxZQUFULENBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxRQUFRLENBQUMsSUFBVCxDQUFBLENBREEsQ0FERDtLQUFBLE1BQUE7QUFJQyxNQUFBLGlCQUFpQixDQUFDLElBQWxCLENBQXVCLFFBQVEsQ0FBQyxFQUFoQyxDQUFBLENBSkQ7S0FERDtBQUFBLEdBTkE7QUFBQSxFQWFBLG1DQUFBLENBQW9DLGlCQUFwQyxDQWJBLENBRGU7QUFBQSxDQWpFaEIsQ0FBQTs7QUFBQSxtQ0FtRkEsR0FBc0MsU0FBQyxpQkFBRCxHQUFBO0FBQ3JDLE1BQUEsNkJBQUE7QUFBQSxPQUFBLHdEQUFBOytCQUFBO0FBQ0MsSUFBQSxLQUFBLEdBQVcsWUFBWSxDQUFDLE9BQWIsQ0FBcUIsRUFBckIsQ0FBWCxDQUFBO0FBQUEsSUFDQSxRQUFBLEdBQVcsY0FBZSxDQUFBLEtBQUEsQ0FEMUIsQ0FBQTtBQUdBLElBQUEsSUFBRyxnQkFBSDtBQUNDLE1BQUEsY0FBYyxDQUFDLE1BQWYsQ0FBc0IsS0FBdEIsRUFBNkIsQ0FBN0IsQ0FBQSxDQUFBO0FBQUEsTUFDQSxZQUFZLENBQUMsTUFBYixDQUFvQixLQUFwQixFQUEyQixDQUEzQixDQURBLENBREQ7S0FKRDtBQUFBLEdBRHFDO0FBQUEsQ0FuRnRDLENBQUE7O0FBQUEsTUE4RkEsR0FBUyxTQUFDLEdBQUQsRUFBTSxHQUFOLEdBQUE7QUFDUixFQUFBLElBQU8sV0FBUDtBQUNDLElBQUEsR0FBQSxHQUFNLENBQU4sQ0FBQTtBQUFBLElBQ0EsR0FBQSxHQUFNLENBRE4sQ0FERDtHQUFBLE1BR0ssSUFBTyxXQUFQO0FBQ0osSUFBQSxHQUFBLEdBQU0sR0FBTixDQUFBO0FBQUEsSUFDQSxHQUFBLEdBQU0sQ0FETixDQURJO0dBSEw7QUFPQSxTQUFPLENBQUMsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLENBQUMsR0FBQSxHQUFNLEdBQVAsQ0FBakIsQ0FBQSxHQUFnQyxHQUF2QyxDQVJRO0FBQUEsQ0E5RlQsQ0FBQTs7QUFBQSxXQXdHQSxHQUFjLFNBQUEsR0FBQTtBQUViLE1BQUEsT0FBQTtBQUFBLEVBQUEsQ0FBQSxHQUFJLGFBQUEsQ0FBYyxDQUFkLEVBQWlCLEdBQWpCLENBQUosQ0FBQTtBQUFBLEVBQ0EsQ0FBQSxHQUFJLGFBQUEsQ0FBYyxDQUFkLEVBQWlCLEdBQWpCLENBREosQ0FBQTtBQUFBLEVBRUEsQ0FBQSxHQUFJLGFBQUEsQ0FBYyxDQUFkLEVBQWlCLEdBQWpCLENBRkosQ0FBQTtBQUlBLFNBQVUsQ0FBRCxHQUFHLElBQUgsR0FBTyxDQUFQLEdBQVMsSUFBVCxHQUFhLENBQXRCLENBTmE7QUFBQSxDQXhHZCxDQUFBOztBQUFBLGFBZ0hBLEdBQWdCLFNBQUMsR0FBRCxFQUFNLEdBQU4sR0FBQTtBQUNmLEVBQUEsSUFBTyxXQUFQO0FBQ0MsSUFBQSxHQUFBLEdBQU0sR0FBTixDQUFBO0FBQUEsSUFDQSxHQUFBLEdBQU0sQ0FETixDQUREO0dBQUE7QUFJQSxTQUFPLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLENBQUMsR0FBQSxHQUFNLENBQU4sR0FBVSxHQUFYLENBQTNCLENBQUEsR0FBOEMsR0FBckQsQ0FMZTtBQUFBLENBaEhoQixDQUFBOztBQUFBLHFCQXVIQSxHQUF3QixTQUFDLEtBQUQsR0FBQTtBQUN2QixFQUFBLEtBQUssQ0FBQyxjQUFOLENBQUEsQ0FBQSxDQUFBO0FBQUEsRUFFQSxlQUFlLENBQUMsQ0FBaEIsR0FBb0IsS0FBSyxDQUFDLEtBRjFCLENBQUE7QUFBQSxFQUdBLGVBQWUsQ0FBQyxDQUFoQixHQUFvQixLQUFLLENBQUMsS0FIMUIsQ0FBQTtBQUFBLEVBS0EsV0FBQSxDQUFBLENBTEEsQ0FEdUI7QUFBQSxDQXZIeEIsQ0FBQTs7QUFBQSxNQWlJTSxDQUFDLEtBQVAsR0FBZ0IsUUFBUSxDQUFDLElBQUksQ0FBQyxXQWpJOUIsQ0FBQTs7QUFBQSxNQWtJTSxDQUFDLE1BQVAsR0FBZ0IsUUFBUSxDQUFDLElBQUksQ0FBQyxZQWxJOUIsQ0FBQTs7QUFBQSxnQkFvSUEsR0FBb0IsTUFBTSxDQUFDLGdCQUFQLElBQTJCLENBcEkvQyxDQUFBOztBQUFBLGlCQXFJQSxHQUFvQixPQUFPLENBQUMsNEJBQVIsSUFBd0MsT0FBTyxDQUFDLHNCQUFoRCxJQUEwRSxDQXJJOUYsQ0FBQTs7QUFBQSxLQXNJQSxHQUFvQixnQkFBQSxHQUFtQixpQkF0SXZDLENBQUE7O0FBd0lBLElBQUcsZ0JBQUEsS0FBb0IsaUJBQXZCO0FBQ0MsRUFBQSxRQUFBLEdBQVksTUFBTSxDQUFDLEtBQW5CLENBQUE7QUFBQSxFQUNBLFNBQUEsR0FBWSxNQUFNLENBQUMsTUFEbkIsQ0FBQTtBQUFBLEVBR0EsTUFBTSxDQUFDLEtBQVAsR0FBZ0IsUUFBQSxHQUFXLEtBSDNCLENBQUE7QUFBQSxFQUlBLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLFNBQUEsR0FBWSxLQUo1QixDQUFBO0FBQUEsRUFNQSxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQWIsR0FBc0IsUUFBQSxHQUFZLElBTmxDLENBQUE7QUFBQSxFQU9BLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBYixHQUFzQixTQUFBLEdBQWEsSUFQbkMsQ0FBQTtBQUFBLEVBU0EsT0FBTyxDQUFDLEtBQVIsQ0FBYyxLQUFkLEVBQXFCLEtBQXJCLENBVEEsQ0FERDtDQXhJQTs7QUFBQSxRQW9KUSxDQUFDLGdCQUFULENBQTJCLFdBQTNCLEVBQXVDLHFCQUF2QyxDQXBKQSxDQUFBOztBQUFBLFFBcUpRLENBQUMsZ0JBQVQsQ0FBMkIsV0FBM0IsRUFBdUMscUJBQXZDLENBckpBLENBQUE7O0FBQUEsYUF1SkEsQ0FBQSxDQXZKQSxDQUFBIiwiZmlsZSI6Im1hc3Rlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuY2FudmFzICAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvdHMnKVxuY29udGV4dCAgICAgICAgID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcbm1heFZlbG9jaXR5ICAgICA9IDEwXG5wYXJ0aWNsZXNBcnJheSAgPSBbXVxucGFydGljbGVzSWRzICAgID0gW11cbnBhcnRpY2xlc09yaWdpbiA9IHtcblx0eDogMFxuXHR5OiAwXG59XG5cbmNsYXNzIFBhcnRpY2xlXG5cblx0Y29uc3RydWN0b3I6IC0+XG5cdFx0QGlkICAgICAgID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpXG5cdFx0QGFscGhhICAgID0gcmFuZG9tKDAuNzUsIDEpXG5cdFx0QHJnYiAgICAgID0gcmFuZG9tQ29sb3IoKVxuXHRcdEBkaWFtZXRlciA9IE1hdGgucm91bmQocmFuZG9tKDUwKSlcblx0XHRAcmFkaXVzICAgPSBNYXRoLnJvdW5kKEBkaWFtZXRlciAvIDIpXG5cblx0XHRAcG9zaXRpb24gPSB7XG5cdFx0XHR4OiBwYXJ0aWNsZXNPcmlnaW4ueCAtIEByYWRpdXNcblx0XHRcdHk6IHBhcnRpY2xlc09yaWdpbi55IC0gQHJhZGl1c1xuXHRcdH1cblxuXHRcdEB2ZWxvY2l0eSA9IHtcblx0XHRcdHg6IHJhbmRvbSgwLCBtYXhWZWxvY2l0eSkgLSAobWF4VmVsb2NpdHkgLyAyKVxuXHRcdFx0eTogcmFuZG9tKDAsIG1heFZlbG9jaXR5KSAtIChtYXhWZWxvY2l0eSAvIDIpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXNcblxuXHR1cGRhdGVWYWx1ZXM6IC0+XG5cdFx0QHBvc2l0aW9uLnggKz0gQHZlbG9jaXR5Lnhcblx0XHRAcG9zaXRpb24ueSArPSBAdmVsb2NpdHkueVxuXG5cdGRyYXc6IC0+XG5cdFx0Y29udGV4dC5maWxsU3R5bGUgPSAncmdiYSgnICsgQHJnYiArICcsICcgKyBAYWxwaGEgKyAnKSdcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpXG5cdFx0Y29udGV4dC5hcmMoQHBvc2l0aW9uLngsIEBwb3NpdGlvbi55LCBAcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgdHJ1ZSlcblx0XHRjb250ZXh0LmNsb3NlUGF0aCgpXG5cdFx0Y29udGV4dC5maWxsKClcblxuXHR3aXRoaW5DYW52YXNCb3VuZHM6IC0+XG5cdFx0cmVzdWx0ID0gdHJ1ZVxuXG5cdFx0aWYgQHBvc2l0aW9uLnggPCAtQGRpYW1ldGVyXG5cdFx0XHRyZXN1bHQgPSBmYWxzZVxuXHRcdGVsc2UgaWYgQHBvc2l0aW9uLnggPiBjYW52YXMud2lkdGggKyBAZGlhbWV0ZXJcblx0XHRcdHJlc3VsdCA9IGZhbHNlXG5cblx0XHRpZiBAcG9zaXRpb24ueSA8IC1AZGlhbWV0ZXJcblx0XHRcdHJlc3VsdCA9IGZhbHNlXG5cdFx0ZWxzZSBpZiBAcG9zaXRpb24ueSA+IGNhbnZhcy5oZWlnaHQgKyBAZGlhbWV0ZXJcblx0XHRcdHJlc3VsdCA9IGZhbHNlXG5cblx0XHRyZXR1cm4gcmVzdWx0XG5cbmFkZFBhcnRpY2xlID0gLT5cblx0cGFydGljbGUgPSBuZXcgUGFydGljbGUoKVxuXG5cdHBhcnRpY2xlc0FycmF5LnVuc2hpZnQocGFydGljbGUpXG5cdHBhcnRpY2xlc0lkcy51bnNoaWZ0KHBhcnRpY2xlLmlkKVxuXG5cdHJldHVyblxuXG5hbmltYXRpb25Mb29wID0gLT5cblx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25Mb29wKVxuXG5cdHBhcnRpY2xlc1RvRGVsZXRlID0gW11cblxuXHRjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXG5cblx0Zm9yIHBhcnRpY2xlIGluIHBhcnRpY2xlc0FycmF5XG5cdFx0aWYgcGFydGljbGUud2l0aGluQ2FudmFzQm91bmRzKClcblx0XHRcdHBhcnRpY2xlLnVwZGF0ZVZhbHVlcygpXG5cdFx0XHRwYXJ0aWNsZS5kcmF3KClcblx0XHRlbHNlXG5cdFx0XHRwYXJ0aWNsZXNUb0RlbGV0ZS5wdXNoKHBhcnRpY2xlLmlkKVxuXG5cdGRlc3Ryb3lQYXJ0aWNsZXNPdXRzaWRlQ2FudmFzQm91bmRzKHBhcnRpY2xlc1RvRGVsZXRlKVxuXG5cdHJldHVyblxuXG5kZXN0cm95UGFydGljbGVzT3V0c2lkZUNhbnZhc0JvdW5kcyA9IChwYXJ0aWNsZXNUb0RlbGV0ZSkgLT5cblx0Zm9yIGlkIGluIHBhcnRpY2xlc1RvRGVsZXRlXG5cdFx0aW5kZXggICAgPSBwYXJ0aWNsZXNJZHMuaW5kZXhPZihpZClcblx0XHRwYXJ0aWNsZSA9IHBhcnRpY2xlc0FycmF5W2luZGV4XVxuXG5cdFx0aWYgcGFydGljbGU/XG5cdFx0XHRwYXJ0aWNsZXNBcnJheS5zcGxpY2UoaW5kZXgsIDEpXG5cdFx0XHRwYXJ0aWNsZXNJZHMuc3BsaWNlKGluZGV4LCAxKVxuXG5cdHJldHVyblxuXG5yYW5kb20gPSAobWluLCBtYXgpIC0+XG5cdHVubGVzcyBtaW4/XG5cdFx0bWluID0gMFxuXHRcdG1heCA9IDFcblx0ZWxzZSB1bmxlc3MgbWF4P1xuXHRcdG1heCA9IG1pblxuXHRcdG1pbiA9IDBcblxuXHRyZXR1cm4gKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW5cblxucmFuZG9tQ29sb3IgPSAtPlxuXG5cdHIgPSByYW5kb21JbnRlZ2VyKDAsIDIwMClcblx0ZyA9IHJhbmRvbUludGVnZXIoMCwgMjAwKVxuXHRiID0gcmFuZG9tSW50ZWdlcigwLCAyMDApXG5cblx0cmV0dXJuIFwiI3tyfSwgI3tnfSwgI3tifVwiXG5cbnJhbmRvbUludGVnZXIgPSAobWluLCBtYXgpIC0+XG5cdHVubGVzcyBtYXg/XG5cdFx0bWF4ID0gbWluXG5cdFx0bWluID0gMFxuXG5cdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4ICsgMSAtIG1pbikpICsgbWluXG5cbnVwZGF0ZVBhcnRpY2xlc09yaWdpbiA9IChldmVudCkgLT5cblx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG5cdHBhcnRpY2xlc09yaWdpbi54ID0gZXZlbnQucGFnZVhcblx0cGFydGljbGVzT3JpZ2luLnkgPSBldmVudC5wYWdlWVxuXG5cdGFkZFBhcnRpY2xlKClcblxuXHRyZXR1cm5cblxuY2FudmFzLndpZHRoICA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcbmNhbnZhcy5oZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodFxuXG5kZXZpY2VQaXhlbFJhdGlvICA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDFcbmJhY2tpbmdTdG9yZVJhdGlvID0gY29udGV4dC53ZWJraXRCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGNvbnRleHQuYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCAxXG5yYXRpbyAgICAgICAgICAgICA9IGRldmljZVBpeGVsUmF0aW8gLyBiYWNraW5nU3RvcmVSYXRpb1xuXG5pZiBkZXZpY2VQaXhlbFJhdGlvICE9IGJhY2tpbmdTdG9yZVJhdGlvXG5cdG9sZFdpZHRoICA9IGNhbnZhcy53aWR0aFxuXHRvbGRIZWlnaHQgPSBjYW52YXMuaGVpZ2h0XG5cblx0Y2FudmFzLndpZHRoICA9IG9sZFdpZHRoICogcmF0aW9cblx0Y2FudmFzLmhlaWdodCA9IG9sZEhlaWdodCAqIHJhdGlvXG5cblx0Y2FudmFzLnN0eWxlLndpZHRoICA9IG9sZFdpZHRoICsgJ3B4J1xuXHRjYW52YXMuc3R5bGUuaGVpZ2h0ID0gb2xkSGVpZ2h0ICsgJ3B4J1xuXG5cdGNvbnRleHQuc2NhbGUocmF0aW8sIHJhdGlvKVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGVQYXJ0aWNsZXNPcmlnaW4pXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB1cGRhdGVQYXJ0aWNsZXNPcmlnaW4pXG5cbmFuaW1hdGlvbkxvb3AoKVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9